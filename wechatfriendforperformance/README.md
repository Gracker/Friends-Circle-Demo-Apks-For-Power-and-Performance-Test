# 微信朋友圈滑动性能测试

本模块用于测试Android应用在滑动时的性能表现，基于wechatfriendforpower项目，UI和资源完全相同。

## 功能说明

提供三个不同负载级别的Activity，用于测试滑动性能：

1. **轻负载Activity**：每一帧的计算量较小，滑动过程中每帧负载轻。适合作为基准性能测试。
2. **中等负载Activity**：每一帧的计算量中等，滑动过程中对CPU和GPU有一定压力。
3. **高负载Activity**：每一帧的计算量大，滑动过程中CPU和GPU负载重。用于测试极限情况下的性能表现。

## 负载级别详细说明

三种负载级别在以下几个方面有所不同：

### 1. 计算负载差异
- **轻负载**：每帧执行5次简单计算
- **中等负载**：每帧执行800次中等复杂度计算，加入三角函数运算
- **高负载**：每帧执行2000次高复杂度计算，加入三角函数和其他复杂运算

### 2. 点赞数量差异
- **轻负载**：每条朋友圈帖子有1-3个点赞
- **中等负载**：每条朋友圈帖子有5-14个点赞
- **高负载**：每条朋友圈帖子有15-34个点赞

### 3. 评论数量差异
- **轻负载**：每条朋友圈帖子有0-2条评论
- **中等负载**：每条朋友圈帖子有5-12条评论
- **高负载**：每条朋友圈帖子有10-24条评论

### 4. 图片加载策略
所有负载级别都采用实时加载图片的策略，不预加载，以模拟用户实际滑动场景中的性能表现。

### 5. 持续帧负载
为确保用户滑动过程中每一帧都有足够的计算压力，添加了持续帧负载机制：
- **轻负载**：不添加额外的持续帧负载
- **中等负载**：每帧额外增加200次计算（仅在滑动时）
- **高负载**：每帧额外增加500次计算（仅在滑动时）

## 使用方法

从应用启动界面选择需要测试的负载级别，然后进行滑动测试。每个Activity都使用相同的UI和资源，
但在滑动过程中的计算负载、点赞数量和评论数量不同，从而全面测试不同情况下的滑动性能。

## 性能分析

本模块在关键点都添加了Trace标记，便于使用Perfetto等工具进行性能分析：

1. Activity生命周期方法（onCreate、onResume）
2. 重要业务方法（initRecyclerView、模拟计算负载等）
3. 关键UI渲染路径（onBindViewHolder等）
4. 持续帧负载计算（continuousLoad）

## 测试说明

- 所有测试在UI和图片资源方面使用相同的测试数据，确保测试条件基本一致
- 每种负载级别的点赞数和评论数不同，更贴近真实使用场景中的差异
- 每次进入Activity都会使用对应负载级别的数据，保证测试的可重复性
- 适合用于比较不同优化方案在各种负载下的性能表现 